struct Vec<T> {
  capacity: i32,
  size: i32,
  buf: *T,
}

fn get_i32(vec: Vec<i32>, index: usize): i32 {
  (:= buf vec.buf)
  buf[index]
}

fn test_array_literal(): void {
  (:= v : Vec<i32> [1, 2, 3])
  (printf "v.size = %d\n" v.size)
  (printf "v[0] = %d\n" (get_i32 v 0))
  (printf "v[1] = %d\n" (get_i32 v 1))
  (printf "v[2] = %d\n" (get_i32 v 2))
}

fn test_array_literal_inference(): void {
  (:= v : Vec<i32> [10, 20, 30]
      v2 [40, 50, 60])
  (printf "v.size = %d, v2.size = %d\n" v.size v2.size)
  (printf "v[0] = %d, v2[0] = %d\n" (get_i32 v 0) (get_i32 v2 0))
}

fn test_float_literal(): void {
  (:= x : f64 3.14)
  (:= y 2.5)
  (printf "x = %f, y = %f\n" x y)
}

alloc fn main(): void {
  (test_array_literal)
  (test_array_literal_inference)
  (test_float_literal)
}
