// Test Vec::push function
// Tests adding elements to a Vec and verifying growth/capacity management

fn test_push_basic(): void {
  (:= v (Vec::new<i32>))
  (printf "Initial: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))

  (:=< v (Vec::push v 10))
  (printf "After push 10: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (printf "v[0]=%d\n" (Vec::get v 0))

  (:=< v (Vec::push v 20))
  (printf "After push 20: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (printf "v[0]=%d, v[1]=%d\n" (Vec::get v 0) (Vec::get v 1))

  (:=< v (Vec::push v 30))
  (printf "After push 30: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (printf "v[0]=%d, v[1]=%d, v[2]=%d\n"
    (Vec::get v 0)
    (Vec::get v 1)
    (Vec::get v 2))
}

fn test_push_growth(): void {
  (:= v (Vec::new<i32>))
  (printf "\n=== Testing Vec growth ===\n")

  // Push 10 elements to trigger capacity doubling
  (:=< v (Vec::push v 0))
  (printf "Pushed 0: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (:=< v (Vec::push v 100))
  (printf "Pushed 100: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (:=< v (Vec::push v 200))
  (printf "Pushed 200: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (:=< v (Vec::push v 300))
  (printf "Pushed 300: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))
  (:=< v (Vec::push v 400))
  (printf "Pushed 400: size=%d, capacity=%d\n" (Vec::len v) (Vec::capacity v))

  // Verify elements
  (printf "\nVerifying elements:\n")
  (printf "v[0]=%d, v[1]=%d, v[2]=%d, v[3]=%d, v[4]=%d\n"
    (Vec::get v 0)
    (Vec::get v 1)
    (Vec::get v 2)
    (Vec::get v 3)
    (Vec::get v 4))
}

alloc fn main(): void {
  (printf "=== Test Push Basic ===\n")
  (test_push_basic)

  (test_push_growth)

  (printf "\n=== All Vec::push tests passed! ===\n")
}
